<!doctype html>
<html lang=en>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content "width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{{url_for('static', filename='css/main.css')}}">
    {% block head %}{% endblock  %}
</head>
<body>
    {% block body %}
    {% endblock  %}
<body>
<script>
    document.addEventListener('DOMContentLoaded', function() {

    const savedLife = localStorage.getItem('userLife');
    if (savedLife>0) {
        life = parseInt(savedLife);
        livesSite = document.getElementById("life");
        livesSite.textContent = "Lives: " + life;
    } else {
        life = 3;
    }
        

    const savedScore = localStorage.getItem('userScore');
    if (savedScore) {
        // If we find a saved score, we use it.
        score = parseInt(savedScore);
        scoreSite = document.getElementById("score");
        scoreSite.textContent = "Score: " + score;
    } else {
        // If not, it's a new game. Start at 0.
        score = 0;
    }
        
    function shuffle(array){
        for(let i = array.length - 1; i > 0; i--){
            const random = Math.floor((Math.random()*(i+1)));
            [array[i], array[random]] =[array[random], array[i]]
        }
    }


    buttons = document.querySelectorAll("button")
    const actorNames= [];
    buttons.forEach(function(button) {
        actorNames.push(button.textContent);
    });
    shuffle(actorNames)
    buttons.forEach(function(button, index) {
        button.textContent = actorNames[index];
    });
    buttons.forEach(function(individual_button) {
        individual_button.addEventListener('click', function() {
        const clickedButton = event.target;
        const selectedAnswer = clickedButton.textContent;
        if (selectedAnswer == '{{actor}}') {
            console.log("CORRECT!")
            score ++;
            scoreSite = document.getElementById("score");
            scoreSite.textContent = "Score: " + score;
            localStorage.setItem('userScore', score);
            localStorage.setItem('userLife', life);
        } else {
            console.log("FALSE") 
            life --;
            if (life == 0) {
                score = 0
            }
            livesSite = document.getElementById("life");
            livesSite.textContent = "Lives: " + life;
            scoreSite = document.getElementById("score");
            scoreSite.textContent = "Score: " + score;
            localStorage.setItem('userScore', score); 
            localStorage.setItem('userLife', life);  
        }
        
    setTimeout(function() {
        window.location.reload();
    }, 2000); // 2000 milliseconds = 2 seconds
        });     
  });
});

</script>    
</html>